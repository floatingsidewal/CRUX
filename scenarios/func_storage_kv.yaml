name: func-storage-kv
location: eastus
resources:
  - type: Microsoft.Web/sites@functionapp
    alias: func1
    params:
      httpsOnly: true
  - type: Microsoft.Storage/storageAccounts
    alias: st1
    params:
      sku: Standard_LRS
      allowBlobPublicAccess: false
      minimumTlsVersion: TLS1_2
  - type: Microsoft.KeyVault/vaults
    alias: kv1
    params:
      enablePurgeProtection: true
relations:
  - link: func1 -> st1
  - link: func1 -> kv1

